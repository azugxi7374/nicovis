var sm9len = 320134;
var sm9vpos = [190950,116360,24300,179210,188980,183850,144370,170850,126960,122180,91450,187300,63320,21830,43750,176330,188280,183120,182450,181950,91000,139730,183040,57530,10560,84660,1210,116600,240990,225980,50,21990,176330,197090,315230,307290,180430,204660,197060,192540,184550,180320,178060,179230,274400,260840,119550,94020,79260,78040,177310,285260,175910,194100,270780,270630,270640,270750,270720,270620,270670,270700,270690,270830,270700,270720,270710,2270730,271000,270730,257840,257830,257880,257890,257830,257750,257940,257900,257810,257890,251150,264100,251360,92960,29060,176550,24820,193920,190050,180680,107050,112020,14740,77600,186150,318850,11090,284920,25560,28950,26810,13590,4740,180160,174500,93720,187990,174990,183910,121520,253150,88580,28590,301320,660,179220,176820,174910,284770,283090,40990,100040,294000,91480,88750,86410,82860,75070,69530,66010,62740,183190,58400,2360,8270,8210,315080,300760,68930,184950,171000,156690,57150,32360,190600,179990,170690,161550,82550,68980,43860,28060,115350,107740,61210,309520,307700,305320,302770,300590,109820,2109530,109790,109860,109780,109570,109960,109890,48600,48150,48250,48310,48150,44370,47950,45290,44570,45080,45510,46090,46290,44690,45460,35420,35400,35350,35290,35390,35440,264220,264130,3264200,264220,264140,264200,264250,251220,251180,251100,250860,250990,250970,251030,251160,251140,251180,251110,251360,251440,179020,156890,92980,29070,286340,18380,190620,180840,237410,52550,316140,295990,273060,182550,313850,2177230,70690,1570,30910,114450,110850,171790,157530,108630,43550,6380,900,4270,5330,2570,291990,197050,5670,215480,160690,68040,108380,51660,17180,2020,185830,174380,9330,30580,2400,271210,10790,214930,96760,25650,156890,158900,93170,30310,26070,16300,2230,196740,68580,27420,156810,96460,11510,244020,215850,168250,182100,255860,311580,307000,301430,301520,170630,171110,113260,283310,281870,237380,3176550,174760,186980,181420,319440,314620,307340,128710,184420,128540,225070,214600,213050,209760,203510,202600,200810,2270,70660,29980,1070580,58350,57000,54980,41440,39980,33610,19860,8170,193690,176170,2070,171670,18810,335460,329110,329060,70970,27660,40680,187300,300170,3250810,248750,156240,78390,28560,19240,302760,170310,9440,62820,255990,212750,175330,13180,188700,264440,251210,308710,175040,201060,694430,94200,33050,24860,144810,301690,179110,5177360,189810,2330,307080,278950,271330,249270,189810,156010,113250,100020,220910,226160,69190,289090,193800,190440,185750,171980,178390,35100,28840,215940,41700,4340,730,2302220,279280,186480,184910,183240,181230,179380,4177600,4174330,199040,174230,151890,140440,244170,305850,160270,176650,7170280,216590,279450,275130,256190,249650,197870,4186390,302150,185030,180800,232510,200650,225930,7193820,319610,311820,309930,301230,318020,315250,312850,310860,308600,303800,3300550,301270,301250,300960,317850,309390,316800,314490,315190,313220,302000,312340,310110,308090,305410,313420,305110,316810,306970,301510,308580,305730,303810,300710,314730,307400,314570,311500,305680,300730,309970,305240,302820,300800,308210,303120,308880,300870,315330,300580,315340,309710,312090,305410,301140,315960,312010,311370,311060,312380,390000,410330,361140];

window.onload = test

function test(){
	//var values = d3.range(10000).map(d3.random.bates(10));
	ngraph({
		//values: values,
		values: sm9vpos,
		bin: 100,
	});
};


// values: vpos配列
// len: 全体の長さ
function ngraph(p){
	_.defaults(p, {
		margin: {top: 10, right: 30, bottom: 30, left: 30},
		w0: 600,
		h0: 400,
		bin: 100,
	});
	
	console.log(p)

	var formatCount = d3.format(",.0f");
	var width = p.w0 - p.margin.left - p.margin.right,
		height = p.w0 - p.margin.top - p.margin.bottom,
		len = p.values.length;
	len = 10000;

	var x = d3.scale.linear()
				.domain([0, len])
				.range([0, width]);

	var data = d3.layout.histogram()
				.bins(x.ticks(p.bin))
				(p.values);
	console.log(data);

	var y = d3.scale.linear()
				.domain([0, d3.max(data, function(d) { return d.y; })])
				.range([height, 0]);

	var xAxis = d3.svg.axis()
				.scale(x)
				.orient("bottom");

	var svg = d3.select("body").append("svg")
			.attr("width", width + p.margin.left + p.margin.right)
			.attr("height", height + p.margin.top + p.margin.bottom)
		.append("g")
			.attr("transform", "translate(" + p.margin.left + "," + p.margin.top + ")");

	var bar = svg.selectAll(".bar")
			.data(data)
		.enter().append("g")
			.attr("class", "bar")
			.attr("transform", function(d) { return "translate(" + x(d.x) + "," + y(d.y) + ")"; });

	bar.append("rect")
			.attr("x", 1)
			.attr("width", x(data[0].dx) - 1)
			.attr("height", function(d) { return height - y(d.y); });


	bar.append("text")
		.attr("dy", ".75em")
		.attr("y", 6)
		.attr("x", x(data[0].dx) / 2)
		.attr("text-anchor", "middle")
		.text(function(d) { return formatCount(d.y); });


	svg.append("g")
		.attr("class", "x axis")
		.attr("transform", "translate(0," + height + ")")
		.call(xAxis);

}












